-- Copyright (c) 2022 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.
-- SPDX-License-Identifier: Apache-2.0

-- TODO The exact same file exists in the //daml-lf/tests package. Refactor as lf version transits from dev to stable for Interfaces?
module InterfaceViews where
import qualified Interface3

data View = View with
  a : Int
  b : Bool

interface I where
    _view : View

interface INoView where

interface INoTemplate where

template T1
  with
    p : Party
    a : Int
  where
    key (p, a): (Party, Int)
    maintainer key._1
    signatory p
    implements I where
      _view = View with
        a
        b = True
    implements INoView where

template T2
  with
    p : Party
    a : Int
  where
    key (p, a): (Party, Int)
    maintainer key._1
    signatory p
    implements I where
      _view = View with
        a
        b = False

template T3
  with
    p : Party
    a : Int
  where
    signatory p
    implements I where
      _view = error "view crashed"

template T4
  with
    p : Party
    a : Int
  where
    signatory p

template T5
 with
   p : Party
   a : Int
 where
   signatory p
   implements I where
     _view = View with
       a
       b = True
   implements Interface3.I2 where
     _view = Interface3.View2 with
       c = 1
